# WeatherApp

## 날씨 앱
https://openweathermap.org/api/one-call-3 사이트의 api를 이용하여 날씨 앱 제작해보기    
ios 온보딩 사전과제를 보고 제작해보았다.

### 첫 화면 (도시별 간략한 날씨 정보)
<p align="center"><img width="357" alt="image" src="https://user-images.githubusercontent.com/71269216/178251588-db3a5410-3c9d-4631-bcc1-4e79b7d3c12c.png"></p>

- 도시별 날씨를 필요한 정보만 가져와 화면에 출력
- 테이블 셀 클릭시 자세한 도시의 날씨 화면으로 넘어감

### 두번째 화면 (자세한 날씨에 대한 정보 출력)
<p align="center"><img width="362" alt="image" src="https://user-images.githubusercontent.com/71269216/178251709-e4083b46-7f6c-4d22-bd47-78bb298a3041.png"></p>
- api를 다시 호출하여 특정 도시의 현재 날씨, 시간대별 날씨, 일별 날씨를 가져옮


### 실행 화면
<p align="center">![Simulator Screen Recording - iPhone 12 - 2022-07-11 at 18 21 47](https://user-images.githubusercontent.com/71269216/178232270-b44c3663-0336-4436-b11f-d9513d901a2a.gif)</p>


## 전체적인 구조
- ViewController 파일
  - ViewController : 처음 보이는 화면으로 도시별 현재 날씨 정보들을 담고 있는 화면
  - DetailWeatherViewController: 첫 화면 셀 클릭시 나오는 화면으로 클릭한 도시의 자세한 날씨 정보들을 담고 있는 화면
- Model 파일
  - Weather: json파일을 디코딩 하기 위한 Codable 파일
  - CityListModel: 도시의 정보를 가지고 ViewController에 뿌려주는 역할을 함
- Cell 파일
  - CityListCell: 첫번째 화면에 간략한 도시별 현재 날씨에 대한 정보를 담는 테이블뷰 셀
  - TodayHourlyWeatherCell : 두번째 화면에서 오늘 시간대별 날씨에 대한 정보를 담는 컬렉션뷰 셀
  - DailyWeatherCell: 두번째 화면에서 일별 날씨에 대한 정보를 담는 테이블뷰 셀
- 그외
  - Network : urlsession을 통해 날씨에 대한 데이터를 가져오는 클래스, Generic을 사용하여 간략한 모델이건 자세한 모델이건 상관없이 원하는 데이터를 받아올 수 있게 만듦
  - CityLocations: 도시별 위도 경도 값이 저장되어 있음

## 배운 점
- CodeBase vs StoryBoard    
평소에 코드로 UI를 작성하다가 오랜만에 스토리보드로 해봐야겠다는 생각에 스토리보드로 작성해보게 되었다.    
확실히 장단점이 존재하는 것 같다.    

장점은    
1. 코드가 훨씬 간결해진다.    
코드로 작성시 모든 오토레이아웃이며 폰트며 모든 것들을 작성해야하다보니 기능적인 부분보다 ui 설정 부분으로 코드가 너무 많이 차지하는 단점이 존재하는데 확실히 스토리보드로 작성하니 그런 부분이 적어 코드가 훨씬 간결해지는 장점이 있는거 같다.
2. 전체적인 구조를 보기 편하다.
코드를 보면 바로 어떻게 생겼는지 그려지지 않아 실행시켜보며 생각해야하지만 스토리보드는 어느정도 모양이 잡혀 있기 때문에 전체적인 구조를 파악하는데 훨씬 빠르다는 장점이 있는거 같다.    
다만 결국 핸드폰 기종마다 화면은 다르게 나오고 스토리보드와 실제로 실행시킬때의 모습이 많이 바뀌는 경우가 많아 상황에 따라 장점이 사라지는 경우도 존재한다.
3. 오토레이아웃 사용이 편하다.
코드로 작성시에는 오토레이아웃이 어떻게 작동될지 직접 생각해가며 해야하지만 스토리보드로 만들경우 즉각적으로 위치가 보여지기 때문에 오토레이아웃 작성시에 편하다는 생각을 하게 되었다.

단점은   
1. 내가 원하는 대로 커스텀하기가 어렵다.
물론 내가 코드로 많이 사용하다보니 그런 것 일 수도 있지만 내가 원하는 기능이 있는지 어떻게 해야 사용할 수 있는지 알기가 어려웠다.   
이번 프로젝트의 목표는 스토리보드로 할 수 있는건 최대한 사용해보자는 것이였기 때문에 최대한 사용해보려 했다. 지금은 단순한 프로젝트여서 큰 문제는 없었지만 결국엔 코드가 편할 거 같다는 생각이 들었다.
2. git 병합시 스토리보드가 충돌 날 경우
이번에 처음으로 스토리보드끼리 충돌이 나게 되었다. 소스코드로 바꾸어 수정하여 잘 마무리 되었다. 처음으로 소스코드로 보게되었는데 내용자체는 대충 이해가 가나 내가 짠 코드도 아니고 
모든 화면에 대한 정보가 단 한 파일에 전부 담겨져 있다보니 전부 읽어보려면 시간이 너무 걸릴거 같았다.
3. 스토리보드에서 코드와 연결하기위해 assistant를 키면 코드를 찾지 못하는 버그
난 이게 제일 커스텀 다음으로 불편하다고 생각한다.   
가끔이 아니라 자주 연결해야하는 코드를 불러오지 못하고 아무것도 없다고 나와 xcode를 껐다가 켜야하는 불편한 상황이 매우 많이 생긴다.    
작업 도중에 계속 창을 닫았다 키는게 여간 불편한게 아니였다.
- Generic    
매일 깃허브에 작성하던 til에 적었던 Generic을 사용해보게 되었다.    
메서드가 중복되는데 타입이 달라 따로 적었는데 문득 옛날에 공부했던 Generic이 생각나 사용해보게 되었다.    
예제로 사용해보는거와 프로젝트에 적용해보는거는 느낌이 많이 다르고 드디어 사용법을 익힌거 같아 기분이 좋았다.   

## 작업중 생긴 문제들    
- DB를 넣으려다가 안하게 됨    
처음에 날씨를 매번 가져오는건 좋지 않다고 생각해 DB에 데이터를 넣어 한시간마다 데이터를 가져오는 방식으로 만들려고 했는데    
생각보다 저장해야할 양이 생각보다 너무 많았다. 또한 첫 화면에 보이는게 도시별 현재 날씨였는데 모든 도시의 데이터를 저장하자니 저장하는데 시간이 좀 오래 걸려 안하는게 좋다고 생각하게 되었다.   
첫 화면을 한 도시의 날씨만 출력하게 한다면 저장해도 괜찮을거 같지만 과제 내용과는 다른게 되버려서 일단 하지 않는 쪽을 선택했다.
클릭해서 화면전환시에 도시의 자세한 날씨 정보만 저장하게해 많은 데이터를 DB에 넣지 않게 하는 방법을 사용해보는것도 괜찮을거라 생각한다.
- api를 전부 가져올지 일부만 가져올지 고민 (mvc 패턴과 api 통신 성능개선 사이에서의 고민)    
처음엔 api 정보를 전부다 가져올 생각을 했다.    
mvc 패턴을 하려고 생각했고, mvc 패턴에서 model의 역할은 어떤 상황에서도 쓰일수 있게 재사용성이 좋아야하며 view의 모양도 몰라야한다. 하지만 api를 나눠서 가지고 오게된다면    
한가지의 view에 맞는 모델을 만들게 되는 것이라고 생각이 들어 어떻게 할지 고민을 하게되었다.    
시간을 계산해본 결과 한번에 데이터를 가지고 오는것과 나눠 가지고 오는건 1초정도의 차이가 났고 생각보다 큰 차이라고 생각해 mvc 패턴이 조금 안맞더라도 나눠서 가지고 오는 방법을 선택했다.    
- 변수명에 대한 고민    
이건 아직 잘 모르겠다.    
나름 햇갈리지 않게 지었다고 생각했는데 막상 만들고보니 이름이 너무 햇갈리게 되어있다.    
다른 사람들은 어떻게 짓는지 여러 글들을 참고하여 바꿀 필요성을 느끼고 있다.
